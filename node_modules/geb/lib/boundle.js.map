{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","boundle.js","src/event-bus.coffee","src/event-object-functions.coffee","src/event-object.coffee"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","global","EventBus","EventObject","extend","child","parent","ctor","this","constructor","key","hasProp","prototype","__super__","hasOwnProperty","slice","superClass","toGlobal","apply","arguments","_toGlobal","eb","_isInstance","arg","Function","Object","_defineArg","args","len","obj","func","domain","option","_replaceToCamelCase","channel","replace","match","pos","charAt","toUpperCase","window","self","./event-object",2,"remove","ebRemove","debug","console","log","Boolean","eo","goToDomain","___","removeAllSub","ref","results","push","instance","createInstance","iObj","j","len1","results1","wItem","Array","createDomainIfNotExist","watch","callToCreate","fName","initInstance","create","thisArg","createFunction","addFunctions","setFunctionToDomain","subDomain","ret","functions","_ebIf","info","objIsEqual","fromObj","toObj","k","v","setOption","options","opt","onReady","String","ebIf",3,"EventObjectHiddenFunctions","Mixin","mixin","array","ref1","value","included","sub","subRE","exec","withoutLast","currentObj","lastDomain","arg1","arg2","arg3","sortArgs","wihtoutLast","test","./event-object-functions"],"mappings":"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","file":"boundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",null,"EventObject = require './event-object'\n\nmodule.exports =\nclass EventBus extends EventObject\n  constructor: (toGlobal=true) ->\n    super\n    @_toGlobal() if toGlobal\n\n  _toGlobal: ->\n    if not global.eb?\n      global.eb = @\n\n  _isInstance: (arg) ->\n    if not arg?\n      return 'undefined'\n    else if arg instanceof Function\n      return 'function'\n    else if arg instanceof Object\n      return 'object'\n    else return 'string'\n  _defineArg: (args...) ->\n    obj = {}\n    for arg in args\n      switch @_isInstance arg\n        when 'function' then obj.func = arg\n        when 'string' then obj.domain = arg\n        when 'object' then obj.option = arg\n    return obj\n\n  _replaceToCamelCase: (channel) ->\n    #First char to upper\n    # channel = \"#{channel.charAt(0).toUpperCase()}#{channel.substring 1,channel.length}\"\n    #replace all -\\w with - uppercase w\n    channel = channel.replace /-\\w/g, (match,pos) ->\n      return match.charAt(1).toUpperCase()\n    #replace : to .\n    channel = channel.replace /:/g, '.'\n\n    return channel\n\nif window? #not node\n  new EventBus()\n","module.exports =\n  remove :\n    # Removes all objects von 'xxx.xxx' domain\n    # Goto domain and then call removeAllSub()\n    # * domain{String}: undefined (call on self) or domain\n    # * return\n    #   * {Boolean}: false there was no domain\n    #   * {Object}: get the sub Domain where its all deleted\n    ebRemove: (domain) ->\n      console.log \"ebRemove: #{domain}\" if eb?.debug\n      if domain instanceof Boolean\n        obj = @eo\n      else obj = @goToDomain domain\n      return false if obj==false\n      # console.info \"ebRemove: \",obj\n      obj.___.removeAllSub()\n      return obj\n    removeAllSub: ->\n      for key,obj of @eo\n        delete @eo[key] if obj.eb instanceof Function or obj instanceof Function\n\n  instance : {} =\n    createInstance: (iObj) ->\n      if iObj instanceof Array\n        for i in iObj\n          @createInstance i\n      else if iObj.domain?\n        {obj} = @createDomainIfNotExist(iObj.domain)\n        delete iObj.domain\n        return obj.___.createInstance iObj\n      else # now we are on right domain:\n        for wItem in iObj.watch\n          @eo[wItem] = @callToCreate wItem,iObj\n          # @eo[wItem] = (args...) -> #@==EventObject\n          #   @___.initInstance(iObj)\n          #   @[wItem].apply @,args\n    callToCreate: (fName,iObj) -> #@==EventObject\n      return (args...) ->\n        @___.initInstance(iObj)\n        return @[fName].apply @,args\n    initInstance: (iObj) ->\n      @removeAllSub()\n      instance = iObj.create()\n      @eo.thisArg = instance\n      for wItem in iObj.watch\n        @createFunction wItem,instance[wItem],{thisArg:instance}\n\n  addFunctions : {} =\n    setFunctionToDomain: (subDomain) -> #@==EventObjectHiddenFunctions\n      if not @eo[subDomain]?\n        @eo[subDomain] = (args...) -> #@==EventObject\n          ret = []\n          # console.log \"@functions[#{subDomain}]: \",@functions[subDomain]\n          for func in @___.functions[subDomain]\n            ret.push func.apply @,args\n          delete @___._ebIf if @___._ebIf?\n          return ret\n    createFunction: (subDomain,func,option) -> #@==EventObjectHiddenFunctions\n      console.info \"createFunction subDomain:#{subDomain} func:\",func if eb?.debug\n      @functions[subDomain] = [] if not @functions[subDomain]?\n\n      @functions[subDomain].push (args...) -> #@==EventObject\n        thisArg = @thisArg #use default thisarg\n        thisArg = option.thisArg if option?.thisArg? #or other\n        if not @___._ebIf?\n          func.apply thisArg,args\n        else\n          if @___.objIsEqual @___._ebIf,thisArg\n            func.apply thisArg,args\n      @setFunctionToDomain subDomain\n    objIsEqual: (fromObj,toObj) ->\n      return false if not fromObj? or not toObj?\n      for k,v of fromObj\n        if not (v == toObj[k])\n          return false\n      return true\n\n  option: {} =\n    setOption: (options) ->\n      # console.log \"options\"\n      # console.log @_functions if eb?.debug\n      for key,opt of options\n        if key=='thisArg' and opt instanceof Object\n          # console.log \"set this arg to \",@obj\n          @eo.thisArg = opt\n        else if key == 'onReady' and opt instanceof Boolean #TODO: del?\n          @onReady = opt\n        else if key == 'remove' and (typeof(opt) == 'string' || opt instanceof String)\n          @ebRemove opt\n        else if key == 'if' and opt instanceof Object\n          @ebIf opt\n        else if opt instanceof Function\n          # @ = new EventObject if not @[domain]?\n          @createFunction key,opt,options\n        else if key == 'instance' and (opt instanceof Object or opt instanceof Array)\n          @createInstance opt\n        else\n          console.log \"what do to with option[#{key}]=\",opt if eb?.debug\n","{remove,instance,addFunctions,option} = require './event-object-functions'\n\nclass Mixin\n  @mixin: (array) ->\n    for obj in array\n      for key, value of obj\n        @::[key] = value\n      obj.included?.apply(@)\n      @\nclass EventObjectHiddenFunctions extends Mixin\n  @mixin [remove,instance,addFunctions,option]\n\n  # * @eo{EventObject}: current event object\n  constructor: (@eo) ->\n    @functions = {}\n\n  ebIf: (obj) ->\n    @_ebIf=obj\n    return @eo\n\n  goToDomain: (domain) ->\n    subRE = /([\\w$]+)\\.?/g\n    obj = @eo\n    while sub=subRE.exec(domain)\n      sub = sub[1]\n      return false if not obj[sub]?\n      obj = obj[sub]\n    return obj\n\n  #create domain\n  # * domain{String}: domain ex. test.test\n  # * withoutLast{Boolean}: true to without last domain, maby because it is a methode domain\n  createDomainIfNotExist: (domain, withoutLast=false) ->\n    console.log \"createDomainIfNotExist with domain:#{domain} and withoutLast=#{withoutLast}\" if eb?.debug\n    currentObj = @eo\n    subRE = /([\\w$]+)\\.?/g\n    if withoutLast\n      subRE = /([\\w$]+)\\./g\n      lastDomain = /\\.([\\w$]+)$/.exec(domain)[1]\n    while sub=subRE.exec(domain)\n      sub = sub[1]\n      currentObj[sub] = new EventObject() if not currentObj[sub]?\n      currentObj = currentObj[sub]\n    return {} =\n      obj: currentObj\n      lastDomain: lastDomain if withoutLast\n\nmodule.exports =\nclass EventObject\n  constructor: ->\n    # @___.obj=@\n    # @___ = new HiddenFunctions @\n    # @___functions = {}\n    @___ = new EventObjectHiddenFunctions(@)\n\n  eb: (arg1,arg2,arg3) ->\n    sortArgs = eb._defineArg arg1,arg2,arg3\n    console.log \"eb:\",sortArgs if eb?.debug\n    {func,domain,option} = sortArgs\n    domain = eb._replaceToCamelCase domain if domain?\n    if /^[\\w$]+$/.test(domain) and func? #if eb('asd',function() ...)\n      console.log \"eb#1\" if eb?.debug\n      @___.createFunction domain,func,option\n    else if domain? #if eb('asd.asd')\n      console.log \"eb#2\" if eb?.debug\n      wihtoutLast=false\n      wihtoutLast=true if func?\n      {obj,lastDomain} = @___.createDomainIfNotExist(domain,wihtoutLast)\n      return obj.eb(lastDomain,func,option)\n    else\n      console.log \"no route!\",sortArgs if eb?.debug\n\n    if option? #only if options are set\n      console.log \"eb#3\" if eb?.debug\n      @___.setOption option\n\n    return @\n\n# HiddenFunctions = require './hidden-functions'\n# class HiddenFunctions\n"],"sourceRoot":"/source/"}